<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Module: TreeHaver::Backends::Java
  
    &mdash; Documentation by YARD 0.9.38
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "TreeHaver::Backends::Java";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (J)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../TreeHaver.html" title="TreeHaver (module)">TreeHaver</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Backends.html" title="TreeHaver::Backends (module)">Backends</a></span></span>
     &raquo; 
    <span class="title">Java</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Module: TreeHaver::Backends::Java
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/tree_haver/backends/java.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'><p>Only available on JRuby</p>
</div>
  </div>

<p>Java backend for JRuby using java-tree-sitter (jtreesitter)</p>

<p>This backend integrates with java-tree-sitter JARs on JRuby,<br />
leveraging JRuby’s native Java integration for optimal performance.</p>

<p>java-tree-sitter provides Java bindings to tree-sitter and supports:</p>
<ul>
  <li>Parsing source code into syntax trees</li>
  <li>Incremental parsing via Parser.parse(Tree, String)</li>
  <li>The Query API for pattern matching</li>
  <li>Tree editing for incremental re-parsing</li>
</ul>

<p>== Installation</p>

<ol>
  <li>
    <p>Download the JAR from Maven Central:<br />
https://central.sonatype.com/artifact/io.github.tree-sitter/jtreesitter</p>
  </li>
  <li>
    <p>Set the environment variable to point to the JAR directory:<br />
export TREE_SITTER_JAVA_JARS_DIR=/path/to/jars</p>
  </li>
  <li>
    <p>Use JRuby to run your code:<br />
jruby -e “require ‘tree_haver’; puts TreeHaver::Backends::Java.available?”</p>
  </li>
</ol>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://github.com/tree-sitter/java-tree-sitter" target="_parent" title="source">source</a></li>
    
      <li><a href="https://tree-sitter.github.io/java-tree-sitter" target="_parent" title="java-tree-sitter documentation">java-tree-sitter documentation</a></li>
    
      <li><a href="https://central.sonatype.com/artifact/io.github.tree-sitter/jtreesitter" target="_parent" title="Maven Central">Maven Central</a></li>
    
  </ul>

</div><h2>Defined Under Namespace</h2>
<p class="children">
  
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="Java/Language.html" title="TreeHaver::Backends::Java::Language (class)">Language</a></span>, <span class='object_link'><a href="Java/Node.html" title="TreeHaver::Backends::Java::Node (class)">Node</a></span>, <span class='object_link'><a href="Java/Parser.html" title="TreeHaver::Backends::Java::Parser (class)">Parser</a></span>, <span class='object_link'><a href="Java/Tree.html" title="TreeHaver::Backends::Java::Tree (class)">Tree</a></span>
    
  
</p>

  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="JAVA_PACKAGE-constant" class="">JAVA_PACKAGE =
          <div class="docstring">
  <div class="discussion">
    <p>The Java package for java-tree-sitter</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>io.github.treesitter.jtreesitter</span><span class='tstring_end'>&quot;</span></span></pre></dd>
      
    </dl>
  







  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_jars_from_env!-class_method" title="add_jars_from_env! (class method)">.<strong>add_jars_from_env!</strong>  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Attempt to append JARs from TREE_SITTER_JAVA_JARS_DIR to JRuby classpath and configure native library path from TREE_SITTER_RUNTIME_LIB.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#available%3F-class_method" title="available? (class method)">.<strong>available?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Check if the Java backend is available.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#capabilities-class_method" title="capabilities (class method)">.<strong>capabilities</strong>  &#x21d2; Hash{Symbol =&gt; Object} </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Get capabilities supported by this backend.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#configure_native_library_path!-class_method" title="configure_native_library_path! (class method)">.<strong>configure_native_library_path!</strong>  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'><p>Configure java.library.path to include the directory containing libtree-sitter.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#java_classes-class_method" title="java_classes (class method)">.<strong>java_classes</strong>  &#x21d2; Hash </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'><p>Get the loaded Java classes.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#load_error-class_method" title="load_error (class method)">.<strong>load_error</strong>  &#x21d2; String<sup>?</sup> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Get the last load error message (for debugging).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reset!-class_method" title="reset! (class method)">.<strong>reset!</strong>  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'><p>Reset the load state (primarily for testing).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#runtime_lookup-class_method" title="runtime_lookup (class method)">.<strong>runtime_lookup</strong>  &#x21d2; Object<sup>?</sup> </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'><p>Get the cached runtime library SymbolLookup.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#runtime_lookup=-class_method" title="runtime_lookup= (class method)">.<strong>runtime_lookup=</strong>(lookup)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'><p>Set the cached runtime library SymbolLookup.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="add_jars_from_env!-class_method">
  
    .<strong>add_jars_from_env!</strong>  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Attempt to append JARs from TREE_SITTER_JAVA_JARS_DIR to JRuby classpath<br />
and configure native library path from TREE_SITTER_RUNTIME_LIB</p>

<p>If the environment variable is set and points to a directory, all .jar files<br />
in that directory (recursively) are added to the JRuby classpath.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h4 class="tag_title">Examples:</h4>
    
      
      <pre class="example code"><code><span class='const'>ENV</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>TREE_SITTER_JAVA_JARS_DIR</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/path/to/java-tree-sitter/jars</span><span class='tstring_end'>&quot;</span></span>
<span class='const'><span class='object_link'><a href="../../TreeHaver.html" title="TreeHaver (module)">TreeHaver</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Backends.html" title="TreeHaver::Backends (module)">Backends</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="TreeHaver::Backends::Java (module)">Java</a></span></span><span class='period'>.</span><span class='id identifier rubyid_add_jars_from_env!'>add_jars_from_env!</span></code></pre>
    
  </div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tree_haver/backends/java.rb', line 66</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_jars_from_env!'>add_jars_from_env!</span>
  <span class='comment'># :nocov:
</span>  <span class='comment'># This method requires JRuby and cannot be tested on MRI/CRuby.
</span>  <span class='comment'># JRuby-specific CI jobs would test this code.
</span>  <span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>java</span><span class='tstring_end'>&quot;</span></span>

  <span class='comment'># Add JARs to classpath
</span>  <span class='id identifier rubyid_dir'>dir</span> <span class='op'>=</span> <span class='const'>ENV</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>TREE_SITTER_JAVA_JARS_DIR</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_dir'>dir</span> <span class='op'>&amp;&amp;</span> <span class='const'>Dir</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span><span class='lparen'>(</span><span class='id identifier rubyid_dir'>dir</span><span class='rparen'>)</span>
    <span class='const'>Dir</span><span class='lbracket'>[</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_dir'>dir</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>**</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>*.jar</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_jar'>jar</span><span class='op'>|</span>
      <span class='kw'>next</span> <span class='kw'>if</span> <span class='gvar'>$CLASSPATH</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_jar'>jar</span><span class='rparen'>)</span>
      <span class='gvar'>$CLASSPATH</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_jar'>jar</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='comment'># Configure native library path for libtree-sitter
</span>  <span class='comment'># java-tree-sitter uses JNI and needs to find the native library
</span>  <span class='id identifier rubyid_configure_native_library_path!'>configure_native_library_path!</span>
  <span class='comment'># :nocov:
</span><span class='kw'>rescue</span> <span class='const'>LoadError</span>
  <span class='comment'># ignore; not JRuby or Java bridge not available
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="available?-class_method">
  
    .<strong>available?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Check if the Java backend is available</p>

<p>Returns true if running on JRuby and java-tree-sitter classes can be loaded.<br />
Automatically attempts to load JARs from ENV[“TREE_SITTER_JAVA_JARS_DIR”] if set.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h4 class="tag_title">Examples:</h4>
    
      
      <pre class="example code"><code><span class='kw'>if</span> <span class='const'><span class='object_link'><a href="../../TreeHaver.html" title="TreeHaver (module)">TreeHaver</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Backends.html" title="TreeHaver::Backends (module)">Backends</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="TreeHaver::Backends::Java (module)">Java</a></span></span><span class='period'>.</span><span class='id identifier rubyid_available?'>available?</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Java backend is ready</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>true if Java backend is available</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tree_haver/backends/java.rb', line 124</span>

<span class='kw'>def</span> <span class='id identifier rubyid_available?'>available?</span>
  <span class='kw'>return</span> <span class='ivar'>@loaded</span> <span class='kw'>if</span> <span class='ivar'>@load_attempted</span>
  <span class='ivar'>@load_attempted</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='ivar'>@loaded</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@load_error</span> <span class='op'>=</span> <span class='kw'>nil</span>

  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>unless</span> <span class='kw'>defined?</span><span class='lparen'>(</span><span class='const'>RUBY_ENGINE</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='const'>RUBY_ENGINE</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>jruby</span><span class='tstring_end'>&quot;</span></span>

  <span class='comment'># :nocov:
</span>  <span class='comment'># Everything below requires JRuby and cannot be tested on MRI/CRuby.
</span>  <span class='comment'># JRuby-specific CI jobs would test this code.
</span>  <span class='kw'>begin</span>
    <span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>java</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>rescue</span> <span class='const'>LoadError</span>
    <span class='ivar'>@load_error</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>JRuby java bridge not available</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>return</span> <span class='kw'>false</span>
  <span class='kw'>end</span>

  <span class='comment'># Optionally augment classpath and configure native library path
</span>  <span class='id identifier rubyid_add_jars_from_env!'>add_jars_from_env!</span>

  <span class='comment'># Try to load the java-tree-sitter classes
</span>  <span class='comment'># Load Parser first as it doesn&#39;t trigger native library loading
</span>  <span class='comment'># Language class triggers native lib loading in its static initializer
</span>  <span class='kw'>begin</span>
    <span class='comment'># These classes don&#39;t require native library initialization
</span>    <span class='ivar'>@java_classes</span><span class='lbracket'>[</span><span class='symbol'>:Parser</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'>Java</span><span class='op'>::</span><span class='const'>IoGithubTreesitterJtreesitter</span><span class='op'>::</span><span class='const'>Parser</span>
    <span class='ivar'>@java_classes</span><span class='lbracket'>[</span><span class='symbol'>:Tree</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'>Java</span><span class='op'>::</span><span class='const'>IoGithubTreesitterJtreesitter</span><span class='op'>::</span><span class='const'>Tree</span>
    <span class='ivar'>@java_classes</span><span class='lbracket'>[</span><span class='symbol'>:Node</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'>Java</span><span class='op'>::</span><span class='const'>IoGithubTreesitterJtreesitter</span><span class='op'>::</span><span class='const'>Node</span>
    <span class='ivar'>@java_classes</span><span class='lbracket'>[</span><span class='symbol'>:InputEdit</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'>Java</span><span class='op'>::</span><span class='const'>IoGithubTreesitterJtreesitter</span><span class='op'>::</span><span class='const'>InputEdit</span>
    <span class='ivar'>@java_classes</span><span class='lbracket'>[</span><span class='symbol'>:Point</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'>Java</span><span class='op'>::</span><span class='const'>IoGithubTreesitterJtreesitter</span><span class='op'>::</span><span class='const'>Point</span>

    <span class='comment'># Language class may fail if native library isn&#39;t found - try it last
</span>    <span class='comment'># and provide a helpful error message
</span>    <span class='kw'>begin</span>
      <span class='ivar'>@java_classes</span><span class='lbracket'>[</span><span class='symbol'>:Language</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'>Java</span><span class='op'>::</span><span class='const'>IoGithubTreesitterJtreesitter</span><span class='op'>::</span><span class='const'>Language</span>
    <span class='kw'>rescue</span> <span class='const'>NameError</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
      <span class='comment'># Language failed but other classes loaded - native lib issue
</span>      <span class='ivar'>@load_error</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Language class failed to initialize (native library issue): </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='comment'># Clear loaded classes since we can&#39;t fully function without Language
</span>      <span class='ivar'>@java_classes</span><span class='period'>.</span><span class='id identifier rubyid_clear'>clear</span>
      <span class='kw'>return</span> <span class='kw'>false</span>
    <span class='kw'>end</span>

    <span class='ivar'>@loaded</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='kw'>rescue</span> <span class='const'>NameError</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
    <span class='ivar'>@load_error</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>java-tree-sitter classes not found: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='ivar'>@loaded</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='kw'>end</span>

  <span class='ivar'>@loaded</span>
  <span class='comment'># :nocov:
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="capabilities-class_method">
  
    .<strong>capabilities</strong>  &#x21d2; <tt>Hash{Symbol =&gt; Object}</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Get capabilities supported by this backend</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h4 class="tag_title">Examples:</h4>
    
      
      <pre class="example code"><code><span class='const'><span class='object_link'><a href="../../TreeHaver.html" title="TreeHaver (module)">TreeHaver</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Backends.html" title="TreeHaver::Backends (module)">Backends</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="TreeHaver::Backends::Java (module)">Java</a></span></span><span class='period'>.</span><span class='id identifier rubyid_capabilities'>capabilities</span>
<span class='comment'># =&gt; { backend: :java, parse: true, query: true, bytes_field: true, incremental: true }</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash{Symbol =&gt; Object}</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>capability map</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


210
211
212
213
214
215
216
217
218
219
220
221
222</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tree_haver/backends/java.rb', line 210</span>

<span class='kw'>def</span> <span class='id identifier rubyid_capabilities'>capabilities</span>
  <span class='comment'># :nocov:
</span>  <span class='comment'># This method returns meaningful data only on JRuby when java-tree-sitter is available.
</span>  <span class='kw'>return</span> <span class='lbrace'>{</span><span class='rbrace'>}</span> <span class='kw'>unless</span> <span class='id identifier rubyid_available?'>available?</span>
  <span class='lbrace'>{</span>
    <span class='label'>backend:</span> <span class='symbol'>:java</span><span class='comma'>,</span>
    <span class='label'>parse:</span> <span class='kw'>true</span><span class='comma'>,</span>
    <span class='label'>query:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='comment'># java-tree-sitter supports the Query API
</span>    <span class='label'>bytes_field:</span> <span class='kw'>true</span><span class='comma'>,</span>
    <span class='label'>incremental:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='comment'># java-tree-sitter supports Parser.parse(Tree, String)
</span>  <span class='rbrace'>}</span>
  <span class='comment'># :nocov:
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="configure_native_library_path!-class_method">
  
    .<strong>configure_native_library_path!</strong>  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p class="note returns_void">This method returns an undefined value.</p><p>Configure java.library.path to include the directory containing libtree-sitter</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tree_haver/backends/java.rb', line 93</span>

<span class='kw'>def</span> <span class='id identifier rubyid_configure_native_library_path!'>configure_native_library_path!</span>
  <span class='comment'># :nocov:
</span>  <span class='comment'># This method requires JRuby and cannot be tested on MRI/CRuby.
</span>  <span class='id identifier rubyid_lib_path'>lib_path</span> <span class='op'>=</span> <span class='const'>ENV</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>TREE_SITTER_RUNTIME_LIB</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_lib_path'>lib_path</span> <span class='op'>&amp;&amp;</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span><span class='lparen'>(</span><span class='id identifier rubyid_lib_path'>lib_path</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_lib_dir'>lib_dir</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_dirname'>dirname</span><span class='lparen'>(</span><span class='id identifier rubyid_lib_path'>lib_path</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_current_path'>current_path</span> <span class='op'>=</span> <span class='id identifier rubyid_java'>java</span><span class='period'>.</span><span class='id identifier rubyid_lang'>lang</span><span class='period'>.</span><span class='const'>System</span><span class='period'>.</span><span class='id identifier rubyid_getProperty'>getProperty</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>java.library.path</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>

  <span class='kw'>unless</span> <span class='id identifier rubyid_current_path'>current_path</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_lib_dir'>lib_dir</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_new_path'>new_path</span> <span class='op'>=</span> <span class='id identifier rubyid_current_path'>current_path</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span> <span class='op'>?</span> <span class='id identifier rubyid_lib_dir'>lib_dir</span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_lib_dir'>lib_dir</span><span class='embexpr_end'>}</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_current_path'>current_path</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_java'>java</span><span class='period'>.</span><span class='id identifier rubyid_lang'>lang</span><span class='period'>.</span><span class='const'>System</span><span class='period'>.</span><span class='id identifier rubyid_setProperty'>setProperty</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>java.library.path</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_new_path'>new_path</span><span class='rparen'>)</span>

    <span class='comment'># Also set jna.library.path in case it uses JNA
</span>    <span class='id identifier rubyid_java'>java</span><span class='period'>.</span><span class='id identifier rubyid_lang'>lang</span><span class='period'>.</span><span class='const'>System</span><span class='period'>.</span><span class='id identifier rubyid_setProperty'>setProperty</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>jna.library.path</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_new_path'>new_path</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='comment'># :nocov:
</span><span class='kw'>rescue</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid__error'>_error</span>
  <span class='comment'># Ignore errors setting library path
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="java_classes-class_method">
  
    .<strong>java_classes</strong>  &#x21d2; <tt>Hash</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p>Get the loaded Java classes</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the Java class references</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


200
201
202</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tree_haver/backends/java.rb', line 200</span>

<span class='kw'>def</span> <span class='id identifier rubyid_java_classes'>java_classes</span>
  <span class='ivar'>@java_classes</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="load_error-class_method">
  
    .<strong>load_error</strong>  &#x21d2; <tt>String</tt><sup>?</sup> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Get the last load error message (for debugging)</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the error message or nil if no error</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


181
182
183</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tree_haver/backends/java.rb', line 181</span>

<span class='kw'>def</span> <span class='id identifier rubyid_load_error'>load_error</span>
  <span class='ivar'>@load_error</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="reset!-class_method">
  
    .<strong>reset!</strong>  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p class="note returns_void">This method returns an undefined value.</p><p>Reset the load state (primarily for testing)</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


189
190
191
192
193
194</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tree_haver/backends/java.rb', line 189</span>

<span class='kw'>def</span> <span class='id identifier rubyid_reset!'>reset!</span>
  <span class='ivar'>@load_attempted</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@loaded</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@load_error</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@java_classes</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="runtime_lookup-class_method">
  
    .<strong>runtime_lookup</strong>  &#x21d2; <tt>Object</tt><sup>?</sup> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p>Get the cached runtime library SymbolLookup</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Object</tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the SymbolLookup for libtree-sitter.so</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


45
46
47</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tree_haver/backends/java.rb', line 45</span>

<span class='kw'>def</span> <span class='id identifier rubyid_runtime_lookup'>runtime_lookup</span>
  <span class='ivar'>@runtime_lookup</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="runtime_lookup=-class_method">
  
    .<strong>runtime_lookup=</strong>(lookup)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p>Set the cached runtime library SymbolLookup</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>lookup</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the SymbolLookup</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


52
53
54</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tree_haver/backends/java.rb', line 52</span>

<span class='kw'>def</span> <span class='id identifier rubyid_runtime_lookup='>runtime_lookup=</span><span class='lparen'>(</span><span class='id identifier rubyid_lookup'>lookup</span><span class='rparen'>)</span>
  <span class='ivar'>@runtime_lookup</span> <span class='op'>=</span> <span class='id identifier rubyid_lookup'>lookup</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Sun Dec 28 22:55:22 2025 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.38 (ruby-4.0.0).
</div>

    </div>
  </body>
</html>